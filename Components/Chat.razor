@inject IUserService UserService


<div class="chat-area">
	<div class="messages-area" id="chatArea">

		@for (int i = 0; i < messages.Count(); i++)
		{
			if (i == 0){
				<mensagem_ class="first">
					<image_ class="message-image" style="background-image: url(../images/@users.FirstOrDefault(u => u.Id == messages[i].Remetent).Image);">
					</image_>
					<content_ class="message-content"> @messages[i].Content </content_>
					@if (i == messages.Count() - 1)
					{
						<time_ class="message-time">08:45</time_>
					}
				</mensagem_>
			}
			else if (messages[i].Remetent != messages[i - 1].Remetent)
			{
				<mensagem_ class="middle-first">
					<image_ class="message-image" style="background-image: url(../images/@users.FirstOrDefault(u => u.Id == messages[i].Remetent).Image);">
					</image_>
					<content_ class="message-content"> @messages[i].Content </content_>
					@if (i == messages.Count() - 1)
					{
						<time_ class="message-time">08:45</time_>
					}
				</mensagem_>
			}
			else if (i == messages.Count() - 1)
			{
				<mensagem_>
					<content_ class="message-content"> @messages[i].Content </content_>
					<time_ class="message-time">08:47</time_>
				</mensagem_>
			}
			else
			{
				<mensagem_>
					<content_ class="message-content">@messages[i].Content</content_>
				</mensagem_>
			}

		}

		<empty></empty>
	</div>
</div>


@code {

	[Parameter]
	public List<Message> messages { get; set; }

	[Parameter]
	public List<User> users { get; set; }

	public Queue<string> images { get; set; }

	public string _lastRemetentId = "";

	protected override async Task OnInitializedAsync()
	{

		@* Console.WriteLine((users.FirstOrDefault(u => u.Id == 1))?.Name ?? "NonFounded"); *@
		@* Console.WriteLine(users.FirstOrDefault(u => u.Id == messages[0].Remetent).Image); *@

		@* initializeImages(); *@
	}

	@* private void initializeImages()
	{
		User? _lastUser = null;
		User? _currentUser;
		foreach (var message in messages)
		{
			_currentUser = users.FirstOrDefault(u => u.Id == message.Remetent);
			if (_currentUser != _lastUser)
			{
				images.Enqueue(_currentUser?.Image ?? "generic.jpg");
			}
		}
	} *@

	private bool teste(string s)
	{
		return true;
	}

}